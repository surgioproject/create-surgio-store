'use strict';

const { utils } = require('surgio');

/**
 * ä½¿ç”¨æ–‡æ¡£ï¼šhttps://surgio.royli.dev/
 */
module.exports = {
  /**
   * è¿œç¨‹ç‰‡æ®µ
   * æ–‡æ¡£ï¼šhttps://surgio.royli.dev/guide/custom-config.html#remotesnippets
   */
  remoteSnippets: [
    {
      name: 'telegram', // æ¨¡æ¿ä¸­å¯¹åº” remoteSnippets.telegram
      url: 'https://raw.githubusercontent.com/ConnersHua/Profiles/master/Surge/Ruleset/Telegram.list'
    },
    {
      name: 'netflix', // æ¨¡æ¿ä¸­å¯¹åº” remoteSnippets.netflix
      url: 'https://raw.githubusercontent.com/ConnersHua/Profiles/master/Surge/Ruleset/Media/Netflix.list'
    },
    {
      name: 'hbo', // æ¨¡æ¿ä¸­å¯¹åº” remoteSnippets.hbo
      url: 'https://raw.githubusercontent.com/ConnersHua/Profiles/master/Surge/Ruleset/Media/HBO.list'
    },
    {
      name: 'hulu', // æ¨¡æ¿ä¸­å¯¹åº” remoteSnippets.hulu
      url: 'https://raw.githubusercontent.com/ConnersHua/Profiles/master/Surge/Ruleset/Media/Hulu.list'
    },
    {
      name: 'paypal', // æ¨¡æ¿ä¸­å¯¹åº” remoteSnippets.paypal
      url: 'https://raw.githubusercontent.com/ConnersHua/Profiles/master/Surge/Ruleset/PayPal.list',
    },
  ],
  customFilters: {
    hktFilter: utils.useKeywords(['hkt', 'HKT']),
  },
  artifacts: [
    /**
     * Surge
     */
    {
      name: 'SurgeV3.conf', // æ–°ç‰ˆ Surge
      template: 'surge_v3',
      provider: 'demo',
    },
    {
      name: 'Surge_simple.conf', // æ—§ç‰ˆ Surge
      template: 'surge_simple',
      provider: 'subscribe_demo',
    },
    // åˆå¹¶ Provider
    {
      name: 'SurgeV3_combine.conf',
      template: 'surge_v3',
      provider: 'demo',
      combineProviders: ['subscribe_demo'],
    },

    /**
     * Clash
     */
    {
      name: 'Clash.yaml',
      template: 'clash',
      provider: 'subscribe_demo',
      proxyGroupModifier(nodeList, filters) {
        return [
          {
            name: 'ğŸš€ Proxy',
            type: 'select',
          },
          {
            name: 'ğŸ¬ Netflix',
            filter: filters.netflixFilter,
            type: 'select',
          },
          {
            name: 'US',
            filter: filters.usFilter,
            type: 'url-test',
          },
          {
            name: 'HK',
            filter: filters.hkFilter,
            type: 'url-test',
          },
          {
            name: 'ğŸ Apple',
            proxies: ['DIRECT', 'ğŸš€ Proxy', 'US', 'HK'],
            type: 'select',
          },
          {
            name: 'ğŸ Apple CDN',
            proxies: ['DIRECT', 'ğŸ Apple'],
            type: 'select',
          },
        ];
      },
    },

    /**
     * Quantumult
     */
    {
      name: 'Quantumult_rules.conf',
      template: 'quantumult_rules',
      provider: 'subscribe_demo',
    },
    {
      name: 'Quantumult.conf',
      template: 'quantumult',
      provider: 'subscribe_demo',
    },
    {
      // ç»™ Quantumult æä¾›è®¢é˜…åœ°å€
      name: 'Shadowsocks_subscribe.conf',
      template: 'shadowsocks_subscribe',
      provider: 'subscribe_demo',
    },

    /**
     * Quantumult X
     */
    {
      name: 'QuantumultX_rules.conf',
      template: 'quantumultx_rules',
      provider: 'demo',
    },
    {
      name: 'QuantumultX.conf',
      template: 'quantumultx',
      provider: 'demo',
    },
    {
      name: 'QuantumultX_subscribe_us.conf',
      template: 'quantumultx_subscribe',
      provider: 'demo',
      customParams: {
        magicVariable: utils.usFilter,
      },
    },
    {
      name: 'QuantumultX_subscribe_hk.conf',
      template: 'quantumultx_subscribe',
      provider: 'demo',
      customParams: {
        magicVariable: utils.hkFilter,
      },
    },
  ],
  /**
   * è®¢é˜…åœ°å€çš„å‰ç¼€éƒ¨åˆ†ï¼Œä»¥ / ç»“å°¾
   * ä¾‹å¦‚é˜¿é‡Œäº‘ OSS çš„è®¿é—®åœ°å€ https://xxx.oss-cn-hangzhou.aliyuncs.com/
   */
  urlBase: 'https://example.com/',
  {{#if useAliyunOss}}
  upload: {
    // é»˜è®¤ä¿å­˜è‡³æ ¹ç›®å½•ï¼Œå¯ä»¥åœ¨æ­¤ä¿®æ”¹å­ç›®å½•åï¼Œä»¥ / ç»“å°¾ï¼Œé»˜è®¤ä¸º /
    prefix: '/',
    bucket: 'surgio-store',
    // æ”¯æŒæ‰€æœ‰åŒºåŸŸ
    region: 'oss-cn-hangzhou',
    // ä»¥ä¸‹ä¿¡æ¯äºé˜¿é‡Œäº‘æ§åˆ¶å°è·å¾—
    accessKeyId: 'YOUR_ACCESS_KEY_ID',
    accessKeySecret: 'YOUR_ACCESS_KEY_SECRET',
  },
  {{/if}}
  {{#if allowAnalytics}}
  // éå¸¸æœ‰é™çš„æŠ¥é”™ä¿¡æ¯æ”¶é›†
  analytics: true,
  {{/if}}
};
